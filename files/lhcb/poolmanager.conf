#
# Setup of PoolManager
#
psu set regex off
psu set allpoolsactive off

#
# The units ...
#
psu create unit -net    0.0.0.0/0.0.0.0

psu create unit -protocol */*

psu create unit -store  *@*
psu create unit -store  ch_lhcb_dteam:DTEAM-disk-only@osm
psu create unit -store  ch_lhcb_dteam:DTEAM@osm
psu create unit -store  ch_lhcb_ops:OPS-disk-only@osm
psu create unit -store  ch_lhcb_ops:OPS@osm
psu create unit -store  dc_lhcb:LHCb-archive@osm
psu create unit -store  dc_lhcb:LHCb-data@osm
psu create unit -store  dc_lhcb:LHCb-disk-only@osm
psu create unit -store  dc_lhcb:LHCb-raw@osm
psu create unit -store  dc_lhcb:LHCb-sdst@osm
psu create unit -store  dc_lhcb:LHCB@osm

#
# The unit Groups ...
#
psu create ugroup any-protocol
psu addto ugroup any-protocol */*

psu create ugroup any-store
psu addto ugroup any-store *@*
psu addto ugroup any-store ch_lhcb_dteam:DTEAM-disk-only@osm
psu addto ugroup any-store ch_lhcb_dteam:DTEAM@osm
psu addto ugroup any-store ch_lhcb_ops:OPS-disk-only@osm
psu addto ugroup any-store ch_lhcb_ops:OPS@osm
psu addto ugroup any-store dc_lhcb:LHCb-archive@osm
psu addto ugroup any-store dc_lhcb:LHCb-data@osm
psu addto ugroup any-store dc_lhcb:LHCb-disk-only@osm
psu addto ugroup any-store dc_lhcb:LHCb-raw@osm
psu addto ugroup any-store dc_lhcb:LHCb-sdst@osm
psu addto ugroup any-store dc_lhcb:LHCB@osm

psu create ugroup lhcb-store
psu addto ugroup lhcb-store dc_lhcb:LHCb-archive@osm
psu addto ugroup lhcb-store dc_lhcb:LHCb-data@osm
psu addto ugroup lhcb-store dc_lhcb:LHCb-disk-only@osm
psu addto ugroup lhcb-store dc_lhcb:LHCb-raw@osm
psu addto ugroup lhcb-store dc_lhcb:LHCb-sdst@osm
psu addto ugroup lhcb-store dc_lhcb:LHCB@osm

psu create ugroup ops-disk-only-store
psu addto ugroup ops-disk-only-store ch_lhcb_dteam:DTEAM-disk-only@osm
psu addto ugroup ops-disk-only-store ch_lhcb_ops:OPS-disk-only@osm

psu create ugroup ops-tape-store
psu addto ugroup ops-tape-store ch_lhcb_dteam:DTEAM@osm
psu addto ugroup ops-tape-store ch_lhcb_ops:OPS@osm

psu create ugroup world-net
psu addto ugroup world-net 0.0.0.0/0.0.0.0

#
# The pools ...
#
psu create pool f01-081-101-e_1D_lhcb
psu create pool f01-081-101-e_2D_lhcb
psu create pool f01-081-101-e_3D_lhcb
psu create pool f01-081-101-e_4D_lhcb
psu create pool f01-081-103-e_1D_lhcb
psu create pool f01-081-103-e_2D_lhcb
psu create pool f01-081-103-e_3D_lhcb
psu create pool f01-081-103-e_4D_lhcb
psu create pool f01-081-105-e_1wT_lhcb
psu create pool f01-081-105-e_2D_lhcb
psu create pool f01-081-105-e_3D_lhcb
psu create pool f01-081-105-e_4D_lhcb
psu create pool f01-081-107-e_1wT_lhcb
psu create pool f01-081-107-e_2D_lhcb
psu create pool f01-081-107-e_3D_lhcb
psu create pool f01-081-107-e_4D_lhcb
psu create pool f01-081-122-e_1D_lhcb
psu create pool f01-081-122-e_2D_lhcb
psu create pool f01-081-122-e_3D_lhcb
psu create pool f01-081-123-e_2D_lhcb
psu create pool f01-081-123-e_3D_lhcb
psu create pool f01-081-124-e_1D_lhcb
psu create pool f01-081-124-e_2D_lhcb
psu create pool f01-081-124-e_3D_lhcb
psu create pool f01-081-125-e_1D_lhcb
psu create pool f01-081-125-e_2D_lhcb
psu create pool f01-081-125-e_3D_lhcb
psu create pool f01-101-130-e_1D_lhcb
psu create pool f01-101-130-e_2D_lhcb
psu create pool f01-101-130-e_3D_ops
psu create pool f01-101-132-e_1D_lhcb
psu create pool f01-101-132-e_2D_lhcb
psu create pool f01-101-132-e_3D_lhcb
psu create pool f01-101-132-e_4D_ops
psu create pool f01-101-134-e_1D_lhcb
psu create pool f01-101-134-e_2D_lhcb
psu create pool f01-101-134-e_3D_lhcb
psu create pool f01-101-142-e_1sT_lhcb
psu create pool f01-101-144-e_1sT_lhcb

#
# The pool groups ...
#
psu create pgroup all-pools
psu addto pgroup all-pools f01-081-101-e_1D_lhcb
psu addto pgroup all-pools f01-081-101-e_2D_lhcb
psu addto pgroup all-pools f01-081-101-e_3D_lhcb
psu addto pgroup all-pools f01-081-101-e_4D_lhcb
psu addto pgroup all-pools f01-081-103-e_1D_lhcb
psu addto pgroup all-pools f01-081-103-e_2D_lhcb
psu addto pgroup all-pools f01-081-103-e_3D_lhcb
psu addto pgroup all-pools f01-081-103-e_4D_lhcb
psu addto pgroup all-pools f01-081-105-e_1wT_lhcb
psu addto pgroup all-pools f01-081-105-e_2D_lhcb
psu addto pgroup all-pools f01-081-105-e_3D_lhcb
psu addto pgroup all-pools f01-081-105-e_4D_lhcb
psu addto pgroup all-pools f01-081-107-e_1wT_lhcb
psu addto pgroup all-pools f01-081-107-e_2D_lhcb
psu addto pgroup all-pools f01-081-107-e_3D_lhcb
psu addto pgroup all-pools f01-081-107-e_4D_lhcb
psu addto pgroup all-pools f01-081-122-e_1D_lhcb
psu addto pgroup all-pools f01-081-122-e_2D_lhcb
psu addto pgroup all-pools f01-081-122-e_3D_lhcb
psu addto pgroup all-pools f01-081-123-e_2D_lhcb
psu addto pgroup all-pools f01-081-123-e_3D_lhcb
psu addto pgroup all-pools f01-081-124-e_1D_lhcb
psu addto pgroup all-pools f01-081-124-e_2D_lhcb
psu addto pgroup all-pools f01-081-124-e_3D_lhcb
psu addto pgroup all-pools f01-081-125-e_1D_lhcb
psu addto pgroup all-pools f01-081-125-e_2D_lhcb
psu addto pgroup all-pools f01-081-125-e_3D_lhcb
psu addto pgroup all-pools f01-101-130-e_1D_lhcb
psu addto pgroup all-pools f01-101-130-e_2D_lhcb
psu addto pgroup all-pools f01-101-130-e_3D_ops
psu addto pgroup all-pools f01-101-132-e_1D_lhcb
psu addto pgroup all-pools f01-101-132-e_2D_lhcb
psu addto pgroup all-pools f01-101-132-e_3D_lhcb
psu addto pgroup all-pools f01-101-132-e_4D_ops
psu addto pgroup all-pools f01-101-134-e_1D_lhcb
psu addto pgroup all-pools f01-101-134-e_2D_lhcb
psu addto pgroup all-pools f01-101-134-e_3D_lhcb
psu addto pgroup all-pools f01-101-142-e_1sT_lhcb
psu addto pgroup all-pools f01-101-144-e_1sT_lhcb

psu create pgroup all-ops-pools
psu addto pgroup all-ops-pools f01-101-130-e_3D_ops
psu addto pgroup all-ops-pools f01-101-132-e_4D_ops

psu create pgroup all-tape-pools
psu addto pgroup all-tape-pools f01-081-105-e_1wT_lhcb
psu addto pgroup all-tape-pools f01-081-107-e_1wT_lhcb
psu addto pgroup all-tape-pools f01-101-142-e_1sT_lhcb
psu addto pgroup all-tape-pools f01-101-144-e_1sT_lhcb

psu create pgroup all-lhcb-pools
psu addto pgroup all-lhcb-pools f01-081-101-e_1D_lhcb
psu addto pgroup all-lhcb-pools f01-081-101-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-081-101-e_3D_lhcb
psu addto pgroup all-lhcb-pools f01-081-101-e_4D_lhcb
psu addto pgroup all-lhcb-pools f01-081-103-e_1D_lhcb
psu addto pgroup all-lhcb-pools f01-081-103-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-081-103-e_3D_lhcb
psu addto pgroup all-lhcb-pools f01-081-103-e_4D_lhcb
psu addto pgroup all-lhcb-pools f01-081-105-e_1wT_lhcb
psu addto pgroup all-lhcb-pools f01-081-105-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-081-105-e_3D_lhcb
psu addto pgroup all-lhcb-pools f01-081-105-e_4D_lhcb
psu addto pgroup all-lhcb-pools f01-081-107-e_1wT_lhcb
psu addto pgroup all-lhcb-pools f01-081-107-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-081-107-e_3D_lhcb
psu addto pgroup all-lhcb-pools f01-081-107-e_4D_lhcb
psu addto pgroup all-lhcb-pools f01-081-122-e_1D_lhcb
psu addto pgroup all-lhcb-pools f01-081-122-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-081-122-e_3D_lhcb
psu addto pgroup all-lhcb-pools f01-081-123-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-081-123-e_3D_lhcb
psu addto pgroup all-lhcb-pools f01-081-124-e_1D_lhcb
psu addto pgroup all-lhcb-pools f01-081-124-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-081-124-e_3D_lhcb
psu addto pgroup all-lhcb-pools f01-081-125-e_1D_lhcb
psu addto pgroup all-lhcb-pools f01-081-125-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-081-125-e_3D_lhcb
psu addto pgroup all-lhcb-pools f01-101-130-e_1D_lhcb
psu addto pgroup all-lhcb-pools f01-101-130-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-101-132-e_1D_lhcb
psu addto pgroup all-lhcb-pools f01-101-132-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-101-132-e_3D_lhcb
psu addto pgroup all-lhcb-pools f01-101-134-e_1D_lhcb
psu addto pgroup all-lhcb-pools f01-101-134-e_2D_lhcb
psu addto pgroup all-lhcb-pools f01-101-134-e_3D_lhcb
psu addto pgroup all-lhcb-pools f01-101-142-e_1sT_lhcb
psu addto pgroup all-lhcb-pools f01-101-144-e_1sT_lhcb

psu create pgroup lhcb-disk-only-pools
psu addto pgroup lhcb-disk-only-pools f01-081-101-e_1D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-101-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-101-e_3D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-101-e_4D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-103-e_1D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-103-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-103-e_3D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-103-e_4D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-105-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-105-e_3D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-105-e_4D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-107-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-107-e_3D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-107-e_4D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-122-e_1D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-122-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-122-e_3D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-123-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-123-e_3D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-124-e_1D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-124-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-124-e_3D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-125-e_1D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-125-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-081-125-e_3D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-101-130-e_1D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-101-130-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-101-132-e_1D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-101-132-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-101-132-e_3D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-101-134-e_1D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-101-134-e_2D_lhcb
psu addto pgroup lhcb-disk-only-pools f01-101-134-e_3D_lhcb


psu create pgroup lhcb-prime-write-tape-pools
psu addto pgroup lhcb-prime-write-tape-pools f01-081-105-e_1wT_lhcb


psu create pgroup lhcb-fallback-write-tape-pools
psu addto pgroup lhcb-fallback-write-tape-pools f01-081-107-e_1wT_lhcb


psu create pgroup lhcb-write-tape-pools
psu addto pgroup lhcb-write-tape-pools f01-081-105-e_1wT_lhcb
psu addto pgroup lhcb-write-tape-pools f01-081-107-e_1wT_lhcb


psu create pgroup ops-disk-only-pools
psu addto pgroup ops-disk-only-pools f01-101-130-e_3D_ops
psu addto pgroup ops-disk-only-pools f01-101-132-e_4D_ops


psu create pgroup lhcb-prime-stage-pools
psu addto pgroup lhcb-prime-stage-pools f01-101-142-e_1sT_lhcb


psu create pgroup lhcb-fallback-stage-pools
psu addto pgroup lhcb-fallback-stage-pools f01-101-144-e_1sT_lhcb


psu create pgroup lhcb-stage-pools
psu addto pgroup lhcb-stage-pools f01-101-142-e_1sT_lhcb
psu addto pgroup lhcb-stage-pools f01-101-144-e_1sT_lhcb


#
# The links ...
#
psu create link lhcb-disk-only-link lhcb-store
psu add link lhcb-disk-only-link lhcb-disk-only-pools
psu set link lhcb-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0

psu create link lhcb-prime-write-tape-link lhcb-store
psu add link lhcb-prime-write-tape-link lhcb-prime-write-tape-pools
psu set link lhcb-prime-write-tape-link -readpref=10 -writepref=20 -cachepref=0 -p2ppref=0

psu create link lhcb-fallback-write-tape-link lhcb-store
psu add link lhcb-fallback-write-tape-link lhcb-fallback-write-tape-pools
psu set link lhcb-fallback-write-tape-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0

psu create link ops-disk-only-link ops-disk-only-store
psu add link ops-disk-only-link ops-disk-only-pools
psu set link ops-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0

psu create link lhcb-fallback-stage-link any-store
psu add link lhcb-fallback-stage-link lhcb-fallback-stage-pools
psu set link lhcb-fallback-stage-link -readpref=10 -writepref=0 -cachepref=5 -p2ppref=0

psu create link lhcb-prime-stage-link any-store
psu add link lhcb-prime-stage-link lhcb-prime-stage-pools
psu set link lhcb-prime-stage-link -readpref=10 -writepref=0 -cachepref=10 -p2ppref=0
#
# The link Groups ...
#
psu create linkGroup lhcb-disk-only-linkGroup
psu set linkGroup custodialAllowed lhcb-disk-only-linkGroup false
psu set linkGroup nearlineAllowed lhcb-disk-only-linkGroup false
psu set linkGroup onlineAllowed lhcb-disk-only-linkGroup true
psu set linkGroup outputAllowed lhcb-disk-only-linkGroup false
psu set linkGroup replicaAllowed lhcb-disk-only-linkGroup true
psu addto linkGroup lhcb-disk-only-linkGroup lhcb-disk-only-link

psu create linkGroup lhcb-tape-linkGroup
psu set linkGroup custodialAllowed lhcb-tape-linkGroup true
psu set linkGroup nearlineAllowed lhcb-tape-linkGroup true
psu set linkGroup onlineAllowed lhcb-tape-linkGroup false
psu set linkGroup outputAllowed lhcb-tape-linkGroup false
psu set linkGroup replicaAllowed lhcb-tape-linkGroup false
psu addto linkGroup lhcb-tape-linkGroup lhcb-prime-write-tape-link
psu addto linkGroup lhcb-tape-linkGroup lhcb-fallback-write-tape-link

#
# Submodule [rc]
#
rc onerror suspend
rc set max retries 3
rc set retry 900
rc set warning path billing
rc set poolpingtimer 600
rc set max restore unlimited
rc set sameHostCopy besteffort
rc set sameHostRetry notchecked
rc set max threads 2147483647

#
# Partition manager
#
pm create -type=wass default
pm set default -spacecostfactor=1.0 -cpucostfactor=1.0 -p2p-fortransfer=yes -stage-allowed=yes

#
# Submodule CostModule (cm)
#
cm set debug off
cm set update on
cm set magic on

