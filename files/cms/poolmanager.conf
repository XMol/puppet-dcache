#
# Setup of PoolManager
#
psu set regex off
psu set allpoolsactive off

#
# The units ...
#
psu create unit -net    0.0.0.0/0.0.0.0

psu create unit -protocol */*

psu create unit -store  *@*
psu create unit -store  ch_cms:CMS@osm
psu create unit -store  ch_cms:CMS-SAM@osm
psu create unit -store  ch_cms:CMS-data-1@osm
psu create unit -store  ch_cms:CMS-data-2@osm
psu create unit -store  ch_cms:CMS-data-3@osm
psu create unit -store  ch_cms:CMS-data-4@osm
psu create unit -store  ch_cms:CMS-data-5@osm
psu create unit -store  ch_cms:CMS-data-6@osm
psu create unit -store  ch_cms:CMS-data-7@osm
psu create unit -store  ch_cms:CMS-data-8@osm
psu create unit -store  ch_cms:CMS-data-9@osm
psu create unit -store  ch_cms:CMS-data-catchall@osm
psu create unit -store  ch_cms:CMS-disk-only@osm
psu create unit -store  ch_cms:CMS-mc-1@osm
psu create unit -store  ch_cms:CMS-mc-2@osm
psu create unit -store  ch_cms:CMS-mc-3@osm
psu create unit -store  ch_cms:CMS-mc-4@osm
psu create unit -store  ch_cms:CMS-mc-5@osm
psu create unit -store  ch_cms:CMS-mc-6@osm
psu create unit -store  ch_cms:CMS-mc-catchall@osm
psu create unit -store  ch_cms:CMS-replica-1@osm
psu create unit -store  ch_cms:CMS-test-1@osm
psu create unit -store  ch_cms:CMS-test-2@osm
psu create unit -store  ch_cms:CMS-test-3@osm
psu create unit -store  ch_dteam:DTEAM-disk-only@osm
psu create unit -store  ch_dteam:DTEAM@osm
psu create unit -store  ch_ops:OPS-disk-only@osm
psu create unit -store  ch_ops:OPS@osm

#
# The unit Groups ...
#
psu create ugroup cms-disk-only-store
psu addto ugroup cms-disk-only-store ch_cms:CMS-disk-only@osm
psu addto ugroup cms-disk-only-store ch_cms:CMS-SAM@osm

psu create ugroup cms-sam-store
psu addto ugroup cms-sam-store ch_cms:CMS-SAM@osm

psu create ugroup cms-tape-store
psu addto ugroup cms-tape-store ch_cms:CMS-data-1@osm
psu addto ugroup cms-tape-store ch_cms:CMS-data-2@osm
psu addto ugroup cms-tape-store ch_cms:CMS-data-3@osm
psu addto ugroup cms-tape-store ch_cms:CMS-data-4@osm
psu addto ugroup cms-tape-store ch_cms:CMS-data-5@osm
psu addto ugroup cms-tape-store ch_cms:CMS-data-6@osm
psu addto ugroup cms-tape-store ch_cms:CMS-data-7@osm
psu addto ugroup cms-tape-store ch_cms:CMS-data-8@osm
psu addto ugroup cms-tape-store ch_cms:CMS-data-9@osm
psu addto ugroup cms-tape-store ch_cms:CMS-data-catchall@osm
psu addto ugroup cms-tape-store ch_cms:CMS-mc-1@osm
psu addto ugroup cms-tape-store ch_cms:CMS-mc-2@osm
psu addto ugroup cms-tape-store ch_cms:CMS-mc-3@osm
psu addto ugroup cms-tape-store ch_cms:CMS-mc-4@osm
psu addto ugroup cms-tape-store ch_cms:CMS-mc-5@osm
psu addto ugroup cms-tape-store ch_cms:CMS-mc-6@osm
psu addto ugroup cms-tape-store ch_cms:CMS-mc-catchall@osm
psu addto ugroup cms-tape-store ch_cms:CMS@osm
psu addto ugroup cms-tape-store ch_cms:CMS-replica-1@osm
psu addto ugroup cms-tape-store ch_cms:CMS-test-1@osm
psu addto ugroup cms-tape-store ch_cms:CMS-test-2@osm
psu addto ugroup cms-tape-store ch_cms:CMS-test-3@osm

psu create ugroup ops-disk-only-store
psu addto ugroup ops-disk-only-store ch_dteam:DTEAM-disk-only@osm
psu addto ugroup ops-disk-only-store ch_ops:OPS-disk-only@osm

psu create ugroup ops-tape-store
psu addto ugroup ops-tape-store ch_dteam:DTEAM@osm
psu addto ugroup ops-tape-store ch_ops:OPS@osm

#
# The pools ...
#
psu create pool f01-065-101-e_1D_cms
psu create pool f01-065-101-e_2D_cms
psu create pool f01-065-101-e_3wT_cms
psu create pool f01-065-101-e_8D_ops
psu create pool f01-065-101-e_9wT_ops
psu create pool f01-065-103-e_1D_cms
psu create pool f01-065-103-e_3S_cms
psu create pool f01-065-103-e_4wT_cms
psu create pool f01-065-103-e_8D_ops
psu create pool f01-065-103-e_9rT_ops
psu create pool f01-065-105-e_1D_cms
psu create pool f01-065-105-e_2D_cms
psu create pool f01-065-105-e_3wT_cms
psu create pool f01-065-107-e_1sT_cms
psu create pool f01-065-109-e_1sT_cms
psu create pool f01-070-120-e_1D_cms
psu create pool f01-070-120-e_2D_cms
psu create pool f01-070-120-e_3D_cms
psu create pool f01-070-120-e_4D_cms
psu create pool f01-070-132-e_1D_cms
psu create pool f01-070-132-e_2D_cms
psu create pool f01-070-132-e_3D_cms
psu create pool f01-070-132-e_4D_cms
psu create pool f01-070-134-e_1D_cms
psu create pool f01-070-134-e_2D_cms
psu create pool f01-070-134-e_3D_cms
psu create pool f01-070-136-e_1D_cms
psu create pool f01-070-136-e_2D_cms
psu create pool f01-070-136-e_3D_cms
psu create pool f01-075-115-e_1D_cms
psu create pool f01-075-115-e_2D_cms
psu create pool f01-075-115-e_3D_cms
psu create pool f01-075-122-e_1D_cms
psu create pool f01-075-122-e_2D_cms
psu create pool f01-075-122-e_3D_cms
psu create pool f01-075-124-e_1D_cms
psu create pool f01-075-124-e_2D_cms
psu create pool f01-075-124-e_3D_cms
psu create pool f01-075-126-e_1D_cms
psu create pool f01-075-126-e_2D_cms
psu create pool f01-080-128-e_1wT_cms
psu create pool f01-080-128-e_2D_cms
psu create pool f01-080-128-e_5D_cms
psu create pool f01-080-128-e_6D_cms
psu create pool f01-080-130-e_1wT_cms
psu create pool f01-080-130-e_2D_cms
psu create pool f01-080-130-e_3D_cms
psu create pool f01-080-130-e_5D_cms
psu create pool f01-081-113-e_1wT_cms
psu create pool f01-081-113-e_2D_cms
psu create pool f01-081-113-e_5D_cms
psu create pool f01-081-113-e_6D_cms

#
# The pool groups ...
#
psu create pgroup all-pools
psu addto pgroup all-pools f01-065-101-e_1D_cms
psu addto pgroup all-pools f01-065-101-e_2D_cms
psu addto pgroup all-pools f01-065-101-e_3wT_cms
psu addto pgroup all-pools f01-065-101-e_8D_ops
psu addto pgroup all-pools f01-065-101-e_9wT_ops
psu addto pgroup all-pools f01-065-103-e_1D_cms
psu addto pgroup all-pools f01-065-103-e_3S_cms
psu addto pgroup all-pools f01-065-103-e_4wT_cms
psu addto pgroup all-pools f01-065-103-e_8D_ops
psu addto pgroup all-pools f01-065-103-e_9rT_ops
psu addto pgroup all-pools f01-065-105-e_1D_cms
psu addto pgroup all-pools f01-065-105-e_2D_cms
psu addto pgroup all-pools f01-065-105-e_3wT_cms
psu addto pgroup all-pools f01-065-107-e_1sT_cms
psu addto pgroup all-pools f01-065-109-e_1sT_cms
psu addto pgroup all-pools f01-070-120-e_1D_cms
psu addto pgroup all-pools f01-070-120-e_2D_cms
psu addto pgroup all-pools f01-070-120-e_3D_cms
psu addto pgroup all-pools f01-070-120-e_4D_cms
psu addto pgroup all-pools f01-070-132-e_1D_cms
psu addto pgroup all-pools f01-070-132-e_2D_cms
psu addto pgroup all-pools f01-070-132-e_3D_cms
psu addto pgroup all-pools f01-070-132-e_4D_cms
psu addto pgroup all-pools f01-070-134-e_1D_cms
psu addto pgroup all-pools f01-070-134-e_2D_cms
psu addto pgroup all-pools f01-070-134-e_3D_cms
psu addto pgroup all-pools f01-070-136-e_1D_cms
psu addto pgroup all-pools f01-070-136-e_2D_cms
psu addto pgroup all-pools f01-070-136-e_3D_cms
psu addto pgroup all-pools f01-075-115-e_1D_cms
psu addto pgroup all-pools f01-075-115-e_2D_cms
psu addto pgroup all-pools f01-075-115-e_3D_cms
psu addto pgroup all-pools f01-075-122-e_1D_cms
psu addto pgroup all-pools f01-075-122-e_2D_cms
psu addto pgroup all-pools f01-075-122-e_3D_cms
psu addto pgroup all-pools f01-075-124-e_1D_cms
psu addto pgroup all-pools f01-075-124-e_2D_cms
psu addto pgroup all-pools f01-075-124-e_3D_cms
psu addto pgroup all-pools f01-075-126-e_1D_cms
psu addto pgroup all-pools f01-075-126-e_2D_cms
psu addto pgroup all-pools f01-080-128-e_1wT_cms
psu addto pgroup all-pools f01-080-128-e_2D_cms
psu addto pgroup all-pools f01-080-128-e_5D_cms
psu addto pgroup all-pools f01-080-128-e_6D_cms
psu addto pgroup all-pools f01-080-130-e_1wT_cms
psu addto pgroup all-pools f01-080-130-e_2D_cms
psu addto pgroup all-pools f01-080-130-e_3D_cms
psu addto pgroup all-pools f01-080-130-e_5D_cms
psu addto pgroup all-pools f01-081-113-e_1wT_cms
psu addto pgroup all-pools f01-081-113-e_2D_cms
psu addto pgroup all-pools f01-081-113-e_5D_cms
psu addto pgroup all-pools f01-081-113-e_6D_cms

psu create pgroup all-tape-pools
psu addto pgroup all-tape-pools f01-065-101-e_9wT_ops
psu addto pgroup all-tape-pools f01-065-101-e_3wT_cms
psu addto pgroup all-tape-pools f01-065-103-e_4wT_cms
psu addto pgroup all-tape-pools f01-065-105-e_3wT_cms
psu addto pgroup all-tape-pools f01-065-107-e_1sT_cms
psu addto pgroup all-tape-pools f01-065-109-e_1sT_cms
psu addto pgroup all-tape-pools f01-080-128-e_1wT_cms
psu addto pgroup all-tape-pools f01-080-130-e_1wT_cms
psu addto pgroup all-tape-pools f01-081-113-e_1wT_cms

psu create pgroup all-cms-pools
psu addto pgroup all-cms-pools f01-065-101-e_1D_cms
psu addto pgroup all-cms-pools f01-065-101-e_2D_cms
psu addto pgroup all-cms-pools f01-065-101-e_3wT_cms
psu addto pgroup all-cms-pools f01-065-103-e_1D_cms
psu addto pgroup all-cms-pools f01-065-103-e_3S_cms
psu addto pgroup all-cms-pools f01-065-103-e_4wT_cms
psu addto pgroup all-cms-pools f01-065-105-e_1D_cms
psu addto pgroup all-cms-pools f01-065-105-e_2D_cms
psu addto pgroup all-cms-pools f01-065-105-e_3wT_cms
psu addto pgroup all-cms-pools f01-070-120-e_1D_cms
psu addto pgroup all-cms-pools f01-070-120-e_2D_cms
psu addto pgroup all-cms-pools f01-070-120-e_3D_cms
psu addto pgroup all-cms-pools f01-070-120-e_4D_cms
psu addto pgroup all-cms-pools f01-070-132-e_1D_cms
psu addto pgroup all-cms-pools f01-070-132-e_2D_cms
psu addto pgroup all-cms-pools f01-070-132-e_3D_cms
psu addto pgroup all-cms-pools f01-070-132-e_4D_cms
psu addto pgroup all-cms-pools f01-070-134-e_1D_cms
psu addto pgroup all-cms-pools f01-070-134-e_2D_cms
psu addto pgroup all-cms-pools f01-070-134-e_3D_cms
psu addto pgroup all-cms-pools f01-070-136-e_1D_cms
psu addto pgroup all-cms-pools f01-070-136-e_2D_cms
psu addto pgroup all-cms-pools f01-070-136-e_3D_cms
psu addto pgroup all-cms-pools f01-075-115-e_1D_cms
psu addto pgroup all-cms-pools f01-075-115-e_2D_cms
psu addto pgroup all-cms-pools f01-075-115-e_3D_cms
psu addto pgroup all-cms-pools f01-075-122-e_1D_cms
psu addto pgroup all-cms-pools f01-075-122-e_2D_cms
psu addto pgroup all-cms-pools f01-075-122-e_3D_cms
psu addto pgroup all-cms-pools f01-075-124-e_1D_cms
psu addto pgroup all-cms-pools f01-075-124-e_2D_cms
psu addto pgroup all-cms-pools f01-075-124-e_3D_cms
psu addto pgroup all-cms-pools f01-075-126-e_1D_cms
psu addto pgroup all-cms-pools f01-075-126-e_2D_cms
psu addto pgroup all-cms-pools f01-080-128-e_1wT_cms
psu addto pgroup all-cms-pools f01-080-128-e_2D_cms
psu addto pgroup all-cms-pools f01-080-128-e_5D_cms
psu addto pgroup all-cms-pools f01-080-128-e_6D_cms
psu addto pgroup all-cms-pools f01-080-130-e_1wT_cms
psu addto pgroup all-cms-pools f01-080-130-e_2D_cms
psu addto pgroup all-cms-pools f01-080-130-e_3D_cms
psu addto pgroup all-cms-pools f01-080-130-e_5D_cms
psu addto pgroup all-cms-pools f01-081-113-e_1wT_cms
psu addto pgroup all-cms-pools f01-081-113-e_2D_cms
psu addto pgroup all-cms-pools f01-081-113-e_5D_cms
psu addto pgroup all-cms-pools f01-081-113-e_6D_cms

psu create pgroup cms-disk-only-pools
psu addto pgroup cms-disk-only-pools f01-065-101-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-065-101-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-065-103-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-065-105-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-065-105-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-070-120-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-070-120-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-070-120-e_3D_cms
psu addto pgroup cms-disk-only-pools f01-070-120-e_4D_cms
psu addto pgroup cms-disk-only-pools f01-070-132-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-070-132-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-070-132-e_3D_cms
psu addto pgroup cms-disk-only-pools f01-070-132-e_4D_cms
psu addto pgroup cms-disk-only-pools f01-070-134-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-070-134-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-070-134-e_3D_cms
psu addto pgroup cms-disk-only-pools f01-070-136-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-070-136-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-070-136-e_3D_cms
psu addto pgroup cms-disk-only-pools f01-075-115-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-075-115-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-075-115-e_3D_cms
psu addto pgroup cms-disk-only-pools f01-075-122-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-075-122-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-075-122-e_3D_cms
psu addto pgroup cms-disk-only-pools f01-075-124-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-075-124-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-075-124-e_3D_cms
psu addto pgroup cms-disk-only-pools f01-075-126-e_1D_cms
psu addto pgroup cms-disk-only-pools f01-075-126-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-080-128-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-080-128-e_5D_cms
psu addto pgroup cms-disk-only-pools f01-080-128-e_6D_cms
psu addto pgroup cms-disk-only-pools f01-080-130-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-080-130-e_3D_cms
psu addto pgroup cms-disk-only-pools f01-080-130-e_5D_cms
psu addto pgroup cms-disk-only-pools f01-081-113-e_2D_cms
psu addto pgroup cms-disk-only-pools f01-081-113-e_5D_cms
psu addto pgroup cms-disk-only-pools f01-081-113-e_6D_cms

psu create pgroup cms-read-tape-pools

psu create pgroup cms-sam-pools
psu addto pgroup cms-sam-pools f01-065-103-e_3S_cms

psu create pgroup cms-write-tape-pools
psu addto pgroup cms-write-tape-pools f01-065-101-e_3wT_cms
psu addto pgroup cms-write-tape-pools f01-065-103-e_4wT_cms
psu addto pgroup cms-write-tape-pools f01-065-105-e_3wT_cms
psu addto pgroup cms-write-tape-pools f01-080-128-e_1wT_cms
psu addto pgroup cms-write-tape-pools f01-080-130-e_1wT_cms
psu addto pgroup cms-write-tape-pools f01-081-113-e_1wT_cms

psu create pgroup cms-fallback-stage-pools
psu addto pgroup cms-fallback-stage-pools f01-065-109-e_1sT_cms

psu create pgroup cms-prime-stage-pools
psu addto pgroup cms-prime-stage-pools f01-065-107-e_1sT_cms

psu create pgroup cms-stage-pools
psu addto pgroup cms-stage-pools f01-065-107-e_1sT_cms
psu addto pgroup cms-stage-pools f01-065-109-e_1sT_cms

psu create pgroup all-ops-pools
psu addto pgroup all-ops-pools f01-065-101-e_8D_ops
psu addto pgroup all-ops-pools f01-065-101-e_9wT_ops
psu addto pgroup all-ops-pools f01-065-103-e_8D_ops
psu addto pgroup all-ops-pools f01-065-103-e_9rT_ops

psu create pgroup ops-disk-only-pools
psu addto pgroup ops-disk-only-pools f01-065-101-e_8D_ops
psu addto pgroup ops-disk-only-pools f01-065-103-e_8D_ops

psu create pgroup ops-read-tape-pools
psu addto pgroup ops-read-tape-pools f01-065-103-e_9rT_ops

psu create pgroup ops-write-tape-pools
psu addto pgroup ops-write-tape-pools f01-065-101-e_9wT_ops

#
# The links ...
#
psu create link cms-disk-only-link cms-disk-only-store
psu add link cms-disk-only-link cms-disk-only-pools
psu set link cms-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=1

psu create link cms-fallback-stage-link cms-tape-store
psu add link cms-fallback-stage-link cms-fallback-stage-pools
psu set link cms-fallback-stage-link -readpref=0 -writepref=0 -cachepref=10 -p2ppref=0

psu create link cms-prime-stage-link cms-tape-store
psu add link cms-prime-stage-link cms-prime-stage-pools
psu set link cms-prime-stage-link -readpref=0 -writepref=0 -cachepref=20 -p2ppref=0

psu create link cms-read-tape-link cms-tape-store
psu add link cms-read-tape-link cms-read-tape-pools
psu set link cms-read-tape-link -readpref=0 -writepref=0 -cachepref=0 -p2ppref=0

psu create link cms-sam-link cms-sam-store
psu add link cms-sam-link cms-sam-pools
psu set link cms-sam-link -readpref=20 -writepref=20 -cachepref=0 -p2ppref=0

psu create link cms-write-tape-link cms-tape-store
psu add link cms-write-tape-link cms-write-tape-pools
psu set link cms-write-tape-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=1

psu create link ops-disk-only-link ops-disk-only-store
psu add link ops-disk-only-link ops-disk-only-pools
psu set link ops-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0

psu create link ops-read-tape-link ops-tape-store
psu add link ops-read-tape-link ops-read-tape-pools
psu set link ops-read-tape-link -readpref=10 -writepref=0 -cachepref=10 -p2ppref=1

psu create link ops-write-tape-link ops-tape-store
psu add link ops-write-tape-link ops-write-tape-pools
psu set link ops-write-tape-link -readpref=0 -writepref=10 -cachepref=0 -p2ppref=0

#
# The link Groups ...
#

#
# Submodule [rc]
#
rc onerror suspend
rc set max retries 100
rc set retry 600
rc set warning path billing
rc set poolpingtimer 600
rc set max restore unlimited
rc set sameHostCopy never
rc set sameHostRetry notchecked
rc set max threads 2147483647

#
# Submodule CostModule (cm)
#
cm set debug off
cm set update on
cm set magic on

#
# Partition manager
#
pm create -type=random default
pm set default -spacecostfactor=1.0 -cpucostfactor=1.0 -p2p-fortransfer=yes -p2p-allowed=yes -stage-allowed=yes -max-copies=5

#
# Pools for migration/decomission
#

# Pools are running on storage that is not performing up to expectations.
psu set pool f01-080*D_cms rdonly
psu set pool f01-081*D_cms rdonly

