#
# Cost module
#
cm set debug off
cm set update on
cm set magic on


#
# Partition manager
#
pm create -type=wass default
pm set default -spacecostfactor=1.0 -cpucostfactor=1.0 -p2p-fortransfer=yes -stage-allowed=yes


#
# PoolManager
#
psu set regex off
psu set allpoolsactive off

#
# The units ...
#
psu create unit -net 0.0.0.0/0.0.0.0
psu create unit -protocol */*
psu create unit -store *@*
psu create unit -store ch_nrg:NRG-AEROGRID-disk@osm
psu create unit -store ch_nrg:NRG-AEROGRID-tape@osm
psu create unit -store ch_nrg:NRG-ASTROGRID-disk@osm
psu create unit -store ch_nrg:NRG-ASTROGRID-tape@osm
psu create unit -store ch_nrg:NRG-ATLAS-disk@osm
psu create unit -store ch_nrg:NRG-ATLAS-tape@osm
psu create unit -store ch_nrg:NRG-BAUVOGRID-disk@osm
psu create unit -store ch_nrg:NRG-BAUVOGRID-tape@osm
psu create unit -store ch_nrg:NRG-BIOIF-disk@osm
psu create unit -store ch_nrg:NRG-BIOIF-tape@osm
psu create unit -store ch_nrg:NRG-BISGRID-disk@osm
psu create unit -store ch_nrg:NRG-BISGRID-tape@osm
psu create unit -store ch_nrg:NRG-BIZ2GRID-disk@osm
psu create unit -store ch_nrg:NRG-BIZ2GRID-tape@osm
psu create unit -store ch_nrg:NRG-BWGRID-disk@osm
psu create unit -store ch_nrg:NRG-BWGRID-tape@osm
psu create unit -store ch_nrg:NRG-C3GRID-disk@osm
psu create unit -store ch_nrg:NRG-C3GRID-tape@osm
psu create unit -store ch_nrg:NRG-CMS-disk@osm
psu create unit -store ch_nrg:NRG-CMS-tape@osm
psu create unit -store ch_nrg:NRG-Danah-Tonne-tape@osm
psu create unit -store ch_nrg:NRG-Danah-Tonne-disk@osm
psu create unit -store ch_nrg:NRG-DGCMS-disk@osm
psu create unit -store ch_nrg:NRG-DGCMS-tape@osm
psu create unit -store ch_nrg:NRG-DGOPS-disk@osm
psu create unit -store ch_nrg:NRG-DGOPS-tape@osm
psu create unit -store ch_nrg:NRG-DGTEST-disk@osm
psu create unit -store ch_nrg:NRG-DGTEST-tape@osm
psu create unit -store ch_nrg:NRG-EDUCATION-disk@osm
psu create unit -store ch_nrg:NRG-EDUCATION-tape@osm
psu create unit -store ch_nrg:NRG-FINGRID-disk@osm
psu create unit -store ch_nrg:NRG-FINGRID-tape@osm
psu create unit -store ch_nrg:NRG-GDIGRID-disk@osm
psu create unit -store ch_nrg:NRG-GDIGRID-tape@osm
psu create unit -store ch_nrg:NRG-HEPCG-disk@osm
psu create unit -store ch_nrg:NRG-HEPCG-tape@osm
psu create unit -store ch_nrg:NRG-INGRID-disk@osm
psu create unit -store ch_nrg:NRG-INGRID-tape@osm
psu create unit -store ch_nrg:NRG-INTERLOGGRID-disk@osm
psu create unit -store ch_nrg:NRG-INTERLOGGRID-tape@osm
psu create unit -store ch_nrg:NRG-KERNDGRID-disk@osm
psu create unit -store ch_nrg:NRG-KERNDGRID-tape@osm
psu create unit -store ch_nrg:NRG-LIFESCIENCE-disk@osm
psu create unit -store ch_nrg:NRG-LIFESCIENCE-tape@osm
psu create unit -store ch_nrg:NRG-MEDIAGRID-disk@osm
psu create unit -store ch_nrg:NRG-MEDIAGRID-tape@osm
psu create unit -store ch_nrg:NRG-MEDIGRID-disk@osm
psu create unit -store ch_nrg:NRG-MEDIGRID-tape@osm
psu create unit -store ch_nrg:NRG-MOSGRID-disk@osm
psu create unit -store ch_nrg:NRG-MOSGRID-tape@osm
psu create unit -store ch_nrg:NRG-OPS-disk@osm
psu create unit -store ch_nrg:NRG-OPS-tape@osm
psu create unit -store ch_nrg:NRG-PARTGRID-disk@osm
psu create unit -store ch_nrg:NRG-PARTGRID-tape@osm
psu create unit -store ch_nrg:NRG-PROGRID-disk@osm
psu create unit -store ch_nrg:NRG-PROGRID-tape@osm
psu create unit -store ch_nrg:NRG-TEXTGRID-disk@osm
psu create unit -store ch_nrg:NRG-TEXTGRID-tape@osm
psu create unit -store ch_nrg:NRG-WISENT-disk@osm
psu create unit -store ch_nrg:NRG-WISENT-tape@osm
psu create unit -store ch_nrg:NRG-WISNET-disk@osm
psu create unit -store ch_nrg:NRG-WISNET-tape@osm

#
# The unit Groups ...
#
psu create ugroup world-net
psu addto ugroup world-net 0.0.0.0/0.0.0.0

psu create ugroup any-protocol
psu addto ugroup any-protocol */*

psu create ugroup any-store
psu addto ugroup any-store */*

psu create ugroup all-tape-store
psu addto ugroup all-tape-store ch_nrg:NRG-AEROGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-ASTROGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-BAUVOGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-BIOIF-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-BISGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-BIZ2GRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-BWGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-C3GRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-CMS-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-Danah-Tonne-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-DGCMS-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-DGOPS-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-DGTEST-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-EDUCATION-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-FINGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-GDIGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-HEPCG-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-INGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-INTERLOGGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-KERNDGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-LIFESCIENCE-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-MEDIAGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-MEDIGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-MOSGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-OPS-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-PARTGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-PROGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-TEXTGRID-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-WISENT-tape@osm
psu addto ugroup all-tape-store ch_nrg:NRG-WISNET-tape@osm

psu create ugroup atlas-tape-store
psu addto ugroup atlas-tape-store ch_nrg:NRG-ATLAS-tape@osm

psu create ugroup atlas-disk-store
psu addto ugroup atlas-disk-store ch_nrg:NRG-ATLAS-disk@osm

psu create ugroup cms-disk-store
psu addto ugroup cms-disk-store ch_nrg:NRG-CMS-disk@osm

psu create ugroup dgrid-disk-store
psu addto ugroup dgrid-disk-store ch_nrg:NRG-AEROGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-ASTROGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-BAUVOGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-BIOIF-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-BISGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-BIZ2GRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-BWGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-C3GRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-Danah-Tonne-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-DGCMS-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-DGOPS-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-DGTEST-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-EDUCATION-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-FINGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-GDIGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-HEPCG-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-INGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-INTERLOGGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-KERNDGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-LIFESCIENCE-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-MEDIAGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-MEDIGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-MOSGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-OPS-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-PARTGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-PROGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-TEXTGRID-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-WISENT-disk@osm
psu addto ugroup dgrid-disk-store ch_nrg:NRG-WISNET-disk@osm

#
# The pools ...
#
#
psu create pool f01-031-116-e_1D_dcms
psu create pool f01-031-116-e_2D_dcms
psu create pool f01-031-116-e_3D_datlas
psu create pool f01-031-117-e_1D_dgrid
psu create pool f01-031-117-e_2D_dcms
psu create pool f01-031-118-e_1wT_datlas
psu create pool f01-031-118-e_2D_dgrid
psu create pool f01-031-118-e_3wT_all
psu create pool f01-031-118-e_4rT_all

#
# The pool groups ...
#
psu create pgroup all-pools
psu addto pgroup all-pools f01-031-116-e_1D_dcms
psu addto pgroup all-pools f01-031-116-e_2D_dcms
psu addto pgroup all-pools f01-031-116-e_3D_datlas
psu addto pgroup all-pools f01-031-117-e_1D_dgrid
psu addto pgroup all-pools f01-031-117-e_2D_dcms
psu addto pgroup all-pools f01-031-118-e_1wT_datlas
psu addto pgroup all-pools f01-031-118-e_2D_dgrid
psu addto pgroup all-pools f01-031-118-e_3wT_all
psu addto pgroup all-pools f01-031-118-e_4rT_all

psu create pgroup all-tape-pools
psu addto pgroup all-tape-pools f01-031-118-e_3wT_all
psu addto pgroup all-tape-pools f01-031-118-e_4rT_all

psu create pgroup all-write-tape-pools
psu addto pgroup all-write-tape-pools f01-031-118-e_3wT_all

psu create pgroup all-read-tape-pools
psu addto pgroup all-read-tape-pools f01-031-118-e_4rT_all

psu create pgroup all-disk-only-pools
psu addto pgroup all-disk-only-pools f01-031-116-e_1D_dcms
psu addto pgroup all-disk-only-pools f01-031-116-e_2D_dcms
psu addto pgroup all-disk-only-pools f01-031-116-e_3D_datlas
psu addto pgroup all-disk-only-pools f01-031-117-e_1D_dgrid
psu addto pgroup all-disk-only-pools f01-031-117-e_2D_dcms
psu addto pgroup all-disk-only-pools f01-031-118-e_2D_dgrid

psu create pgroup datlas-disk-only-pools
psu addto pgroup datlas-disk-only-pools f01-031-116-e_3D_datlas

psu create pgroup datlas-write-tape-pools
psu addto pgroup datlas-write-tape-pools f01-031-118-e_1wT_datlas

psu create pgroup dcms-disk-only-pools
psu addto pgroup dcms-disk-only-pools f01-031-116-e_1D_dcms
psu addto pgroup dcms-disk-only-pools f01-031-116-e_2D_dcms
psu addto pgroup dcms-disk-only-pools f01-031-117-e_2D_dcms

psu create pgroup dgrid-disk-only-pools
psu addto pgroup dgrid-disk-only-pools f01-031-117-e_1D_dgrid
psu addto pgroup dgrid-disk-only-pools f01-031-118-e_2D_dgrid

#
# The links ...
#
psu create link all-tape-write-link all-tape-store
psu set link all-tape-write-link -readpref=0 -writepref=10 -cachepref=0 -p2ppref=0
psu add link all-tape-write-link all-write-tape-pools

psu create link all-tape-read-link all-tape-store
psu set link all-tape-read-link -readpref=10 -writepref=0 -cachepref=10 -p2ppref=1
psu add link all-tape-read-link all-read-tape-pools

psu create link atlas-disk-only-link atlas-disk-store
psu set link atlas-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0
psu add link atlas-disk-only-link datlas-disk-only-pools

psu create link atlas-write-tape-link atlas-tape-store
psu set link atlas-write-tape-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0
psu add link atlas-write-tape-link datlas-write-tape-pools

psu create link cms-disk-only-link cms-disk-store
psu set link cms-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0
psu add link cms-disk-only-link dcms-disk-only-pools

psu create link dgrid-disk-only-link dgrid-disk-store
psu set link dgrid-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0
psu add link dgrid-disk-only-link dgrid-disk-only-pools

#
# The link groups ...
#
psu create linkGroup tape-linkGroup
psu set linkGroup custodialAllowed tape-linkGroup true
psu set linkGroup replicaAllowed tape-linkGroup false
psu set linkGroup nearlineAllowed tape-linkGroup true
psu set linkGroup outputAllowed tape-linkGroup false
psu set linkGroup onlineAllowed tape-linkGroup false
psu addto linkGroup tape-linkGroup all-tape-write-link

psu create linkGroup atlas-disk-linkGroup
psu set linkGroup custodialAllowed atlas-disk-linkGroup false
psu set linkGroup replicaAllowed atlas-disk-linkGroup true
psu set linkGroup nearlineAllowed atlas-disk-linkGroup false
psu set linkGroup outputAllowed atlas-disk-linkGroup false
psu set linkGroup onlineAllowed atlas-disk-linkGroup true
psu addto linkGroup atlas-disk-linkGroup atlas-disk-only-link

psu create linkGroup atlas-tape-linkGroup
psu set linkGroup custodialAllowed atlas-tape-linkGroup true
psu set linkGroup replicaAllowed atlas-tape-linkGroup false
psu set linkGroup nearlineAllowed atlas-tape-linkGroup true
psu set linkGroup outputAllowed atlas-tape-linkGroup false
psu set linkGroup onlineAllowed atlas-tape-linkGroup false
psu addto linkGroup atlas-tape-linkGroup atlas-write-tape-link

psu create linkGroup cms-disk-linkGroup
psu set linkGroup custodialAllowed cms-disk-linkGroup false
psu set linkGroup replicaAllowed cms-disk-linkGroup true
psu set linkGroup nearlineAllowed cms-disk-linkGroup false
psu set linkGroup outputAllowed cms-disk-linkGroup false
psu set linkGroup onlineAllowed cms-disk-linkGroup true
psu addto linkGroup cms-disk-linkGroup cms-disk-only-link

psu create linkGroup dgrid-disk-linkGroup
psu set linkGroup custodialAllowed dgrid-disk-linkGroup false
psu set linkGroup replicaAllowed dgrid-disk-linkGroup true
psu set linkGroup nearlineAllowed dgrid-disk-linkGroup false
psu set linkGroup outputAllowed dgrid-disk-linkGroup false
psu set linkGroup onlineAllowed dgrid-disk-linkGroup true
psu addto linkGroup dgrid-disk-linkGroup dgrid-disk-only-link

#
# Request container
#
rc onerror suspend
rc set max retries 3
rc set retry 900
rc set warning path billing
rc set poolpingtimer 600
rc set max restore unlimited
rc set sameHostCopy besteffort
rc set sameHostRetry notchecked
rc set max threads 2147483647
