#
# Setup of PoolManager
#
set timeout pool 120


#
# The units ...
#
psu create unit -net 0.0.0.0/0.0.0.0
psu create unit -protocol */*
psu create unit -store *@*
psu create unit -store ch_urprod_dteam:DTEAM-disk-only@osm
psu create unit -store ch_urprod_dteam:DTEAM@osm
psu create unit -store ch_urprod_ops:OPS-disk-only@osm
psu create unit -store ch_urprod_ops:OPS@osm
psu create unit -store dc_auger:AUGER-disk-only@osm
psu create unit -store dc_auger:AUGER@osm
psu create unit -store dc_belle:BELLE-disk-only@osm
psu create unit -store dc_cdf:CDF-disk-only@osm
psu create unit -store dc_cdf:CDF-Grid1@osm
psu create unit -store dc_cdf:CDF@osm
psu create unit -store dc_compass:COMPASS-disk-only@osm
psu create unit -store dc_compass:COMPASS-Grid1@osm
psu create unit -store dc_compass:COMPASS@osm


#
# The unit Groups ...
#
psu create ugroup any-store
psu addto ugroup any-store *@*
psu addto ugroup any-store ch_urprod_dteam:DTEAM-disk-only@osm
psu addto ugroup any-store ch_urprod_dteam:DTEAM@osm
psu addto ugroup any-store ch_urprod_ops:OPS-disk-only@osm
psu addto ugroup any-store ch_urprod_ops:OPS@osm
psu addto ugroup any-store dc_auger:AUGER-disk-only@osm
psu addto ugroup any-store dc_auger:AUGER@osm
psu addto ugroup any-store dc_belle:BELLE-disk-only@osm
psu addto ugroup any-store dc_cdf:CDF-disk-only@osm
psu addto ugroup any-store dc_cdf:CDF-Grid1@osm
psu addto ugroup any-store dc_cdf:CDF@osm
psu addto ugroup any-store dc_compass:COMPASS-disk-only@osm
psu addto ugroup any-store dc_compass:COMPASS-Grid1@osm
psu addto ugroup any-store dc_compass:COMPASS@osm

psu create ugroup auger-disk-only-store
psu addto ugroup auger-disk-only-store dc_auger:AUGER-disk-only@osm

psu create ugroup belle-disk-only-store
psu addto ugroup belle-disk-only-store dc_belle:BELLE-disk-only@osm

psu create ugroup cdf-disk-only-store
psu addto ugroup cdf-disk-only-store dc_cdf:CDF-disk-only@osm

psu create ugroup cdf-tape-store
psu addto ugroup cdf-tape-store dc_cdf:CDF@osm
psu addto ugroup cdf-tape-store dc_cdf:CDF-Grid1@osm

psu create ugroup compass-disk-only-store
psu addto ugroup compass-disk-only-store dc_compass:COMPASS-disk-only@osm

psu create ugroup compass-tape-store
psu addto ugroup compass-tape-store dc_compass:COMPASS@osm
psu addto ugroup compass-tape-store dc_compass:COMPASS-Grid1@osm

psu create ugroup ops-dteam-disk-only-store
psu addto ugroup ops-dteam-disk-only-store ch_urprod_dteam:DTEAM-disk-only@osm
psu addto ugroup ops-dteam-disk-only-store ch_urprod_ops:OPS-disk-only@osm

psu create ugroup ops-dteam-tape-store
psu addto ugroup ops-dteam-tape-store ch_urprod_dteam:DTEAM@osm
psu addto ugroup ops-dteam-tape-store ch_urprod_ops:OPS@osm


#
# The pools ...
#
psu create pool f01-070-116-e_1D_cdf
psu create pool f01-070-116-e_2D_belle
psu create pool f01-070-116-e_3rT_cdf
psu create pool f01-070-116-e_5D_compass
psu create pool f01-070-116-e_6D_ops_dteam
psu create pool f01-070-117-e_1D_compass
psu create pool f01-070-117-e_3D_ops_dteam
psu create pool f01-070-117-e_2D_belle
psu create pool f01-075-113-e_1D_cdf
psu create pool f01-075-113-e_2D_belle
psu create pool f01-075-113-e_3rT_cdf
psu create pool f01-075-113-e_4wT_cdf
psu create pool f01-075-113-e_5wT_compass
psu create pool f01-075-113-e_7sT_shared
psu create pool f01-080-132-e_1wT_compass
psu create pool f01-080-132-e_2rT_compass
psu create pool f01-080-109-e_1D_auger
psu create pool f01-080-109-e_2D_auger
psu create pool f01-080-109-e_3D_auger
psu create pool f01-080-109-e_4D_auger
psu create pool f01-080-109-e_5D_auger
psu create pool f01-080-110-e_1D_auger
psu create pool f01-080-110-e_2D_auger
psu create pool f01-080-110-e_3D_auger
psu create pool f01-080-110-e_4D_auger

psu create pgroup all-auger-pools
psu addto pgroup all-auger-pools f01-080-109-e_1D_auger
psu addto pgroup all-auger-pools f01-080-109-e_2D_auger
psu addto pgroup all-auger-pools f01-080-109-e_3D_auger
psu addto pgroup all-auger-pools f01-080-109-e_4D_auger
psu addto pgroup all-auger-pools f01-080-109-e_5D_auger
psu addto pgroup all-auger-pools f01-080-110-e_1D_auger
psu addto pgroup all-auger-pools f01-080-110-e_2D_auger
psu addto pgroup all-auger-pools f01-080-110-e_3D_auger
psu addto pgroup all-auger-pools f01-080-110-e_4D_auger

psu create pgroup all-belle-pools
psu addto pgroup all-belle-pools f01-070-116-e_2D_belle
psu addto pgroup all-belle-pools f01-070-117-e_2D_belle
psu addto pgroup all-belle-pools f01-075-113-e_2D_belle

psu create pgroup all-cdf-pools
psu addto pgroup all-cdf-pools f01-070-116-e_1D_cdf
psu addto pgroup all-cdf-pools f01-070-116-e_3rT_cdf
psu addto pgroup all-cdf-pools f01-075-113-e_1D_cdf
psu addto pgroup all-cdf-pools f01-075-113-e_3rT_cdf
psu addto pgroup all-cdf-pools f01-075-113-e_4wT_cdf

psu create pgroup all-compass-pools
psu addto pgroup all-compass-pools f01-070-116-e_5D_compass
psu addto pgroup all-compass-pools f01-070-117-e_1D_compass
psu addto pgroup all-compass-pools f01-075-113-e_5wT_compass
psu addto pgroup all-compass-pools f01-080-132-e_1wT_compass
psu addto pgroup all-compass-pools f01-080-132-e_2rT_compass

psu create pgroup all-ops-dteam-pools
psu addto pgroup all-ops-dteam-pools f01-070-116-e_6D_ops_dteam
psu addto pgroup all-ops-dteam-pools f01-070-117-e_3D_ops_dteam

psu create pgroup all-pools
psu addto pgroup all-pools f01-070-116-e_1D_cdf
psu addto pgroup all-pools f01-070-116-e_2D_belle
psu addto pgroup all-pools f01-070-116-e_3rT_cdf
psu addto pgroup all-pools f01-070-116-e_5D_compass
psu addto pgroup all-pools f01-070-116-e_6D_ops_dteam
psu addto pgroup all-pools f01-070-117-e_1D_compass
psu addto pgroup all-pools f01-070-117-e_2D_belle
psu addto pgroup all-pools f01-070-117-e_3D_ops_dteam
psu addto pgroup all-pools f01-075-113-e_1D_cdf
psu addto pgroup all-pools f01-075-113-e_2D_belle
psu addto pgroup all-pools f01-075-113-e_3rT_cdf
psu addto pgroup all-pools f01-075-113-e_4wT_cdf
psu addto pgroup all-pools f01-075-113-e_5wT_compass
psu addto pgroup all-pools f01-075-113-e_7sT_shared
psu addto pgroup all-pools f01-080-132-e_1wT_compass
psu addto pgroup all-pools f01-080-132-e_2rT_compass
psu addto pgroup all-pools f01-080-109-e_1D_auger
psu addto pgroup all-pools f01-080-109-e_2D_auger
psu addto pgroup all-pools f01-080-109-e_3D_auger
psu addto pgroup all-pools f01-080-109-e_4D_auger
psu addto pgroup all-pools f01-080-109-e_5D_auger
psu addto pgroup all-pools f01-080-110-e_1D_auger
psu addto pgroup all-pools f01-080-110-e_2D_auger
psu addto pgroup all-pools f01-080-110-e_3D_auger
psu addto pgroup all-pools f01-080-110-e_4D_auger

psu create pgroup all-tape-pools
psu addto pgroup all-tape-pools f01-075-113-e_4wT_cdf
psu addto pgroup all-tape-pools f01-075-113-e_5wT_compass
psu addto pgroup all-tape-pools f01-075-113-e_7sT_shared
psu addto pgroup all-tape-pools f01-080-132-e_1wT_compass

psu create pgroup auger-disk-only-pools
psu addto pgroup auger-disk-only-pools f01-080-109-e_1D_auger
psu addto pgroup auger-disk-only-pools f01-080-109-e_2D_auger
psu addto pgroup auger-disk-only-pools f01-080-109-e_3D_auger
psu addto pgroup auger-disk-only-pools f01-080-109-e_4D_auger
psu addto pgroup auger-disk-only-pools f01-080-109-e_5D_auger
psu addto pgroup auger-disk-only-pools f01-080-110-e_1D_auger
psu addto pgroup auger-disk-only-pools f01-080-110-e_2D_auger
psu addto pgroup auger-disk-only-pools f01-080-110-e_3D_auger
psu addto pgroup auger-disk-only-pools f01-080-110-e_4D_auger

psu create pgroup belle-disk-only-pools
psu addto pgroup belle-disk-only-pools f01-070-116-e_2D_belle
psu addto pgroup belle-disk-only-pools f01-070-117-e_2D_belle
psu addto pgroup belle-disk-only-pools f01-075-113-e_2D_belle

psu create pgroup cdf-disk-only-pools
psu addto pgroup cdf-disk-only-pools f01-070-116-e_1D_cdf
psu addto pgroup cdf-disk-only-pools f01-075-113-e_1D_cdf

psu create pgroup cdf-read-tape-pools
psu addto pgroup cdf-read-tape-pools f01-075-113-e_3rT_cdf

psu create pgroup cdf-write-tape-pools
psu addto pgroup cdf-write-tape-pools f01-075-113-e_4wT_cdf

psu create pgroup compass-disk-only-pools
psu addto pgroup compass-disk-only-pools f01-070-116-e_5D_compass
psu addto pgroup compass-disk-only-pools f01-070-117-e_1D_compass

psu create pgroup compass-read-tape-pools
psu addto pgroup compass-read-tape-pools f01-080-132-e_2rT_compass

psu create pgroup compass-write-tape-pools
psu addto pgroup compass-write-tape-pools f01-075-113-e_5wT_compass
psu addto pgroup compass-write-tape-pools f01-080-132-e_1wT_compass

psu create pgroup ops-dteam-disk-only-pools
psu addto pgroup ops-dteam-disk-only-pools f01-070-116-e_6D_ops_dteam
psu addto pgroup ops-dteam-disk-only-pools f01-070-117-e_3D_ops_dteam

psu create pgroup shared-fallback-stage-pools

psu create pgroup shared-prime-stage-pools
psu addto pgroup shared-prime-stage-pools f01-075-113-e_7sT_shared

psu create pgroup shared-stage-pools
psu addto pgroup shared-stage-pools f01-075-113-e_7sT_shared


# 
# The links ...
#
psu create link auger-disk-only-link auger-disk-only-store
psu set link auger-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0
psu add link auger-disk-only-link auger-disk-only-pools

psu create link belle-disk-only-link belle-disk-only-store
psu set link belle-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0
psu add link belle-disk-only-link belle-disk-only-pools

psu create link cdf-disk-only-link cdf-disk-only-store
psu set link cdf-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0
psu add link cdf-disk-only-link cdf-disk-only-pools

psu create link cdf-read-tape-link cdf-tape-store
psu set link cdf-read-tape-link -readpref=10 -writepref=0 -cachepref=0 -p2ppref=-1
psu add link cdf-read-tape-link cdf-read-tape-pools

psu create link cdf-write-tape-link cdf-tape-store
psu set link cdf-write-tape-link -readpref=0 -writepref=10 -cachepref=0 -p2ppref=0
psu add link cdf-write-tape-link cdf-write-tape-pools

psu create link compass-disk-only-link compass-disk-only-store
psu set link compass-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=1
psu add link compass-disk-only-link compass-disk-only-pools

psu create link compass-read-tape-link compass-tape-store
psu set link compass-read-tape-link -readpref=10 -writepref=0 -cachepref=0 -p2ppref=-1
psu add link compass-read-tape-link compass-read-tape-pools

psu create link compass-write-tape-link compass-tape-store
psu set link compass-write-tape-link -readpref=0 -writepref=10 -cachepref=0 -p2ppref=0
psu add link compass-write-tape-link compass-write-tape-pools

psu create link ops-dteam-disk-only-link ops-dteam-disk-only-store
psu set link ops-dteam-disk-only-link -readpref=10 -writepref=10 -cachepref=0 -p2ppref=0
psu add link ops-dteam-disk-only-link ops-dteam-disk-only-pools

psu create link shared-prime-stage-link any-store
psu set link shared-prime-stage-link -readpref=0 -writepref=0 -cachepref=10 -p2ppref=0
psu add link shared-prime-stage-link shared-prime-stage-pools

psu create link shared-fallback-stage-link any-store
psu set link shared-fallback-stage-link -readpref=0 -writepref=0 -cachepref=5 -p2ppref=0
psu add link shared-fallback-stage-link shared-fallback-stage-pools


psu create linkGroup belle-disk-only-linkGroup
psu set linkGroup custodialAllowed belle-disk-only-linkGroup false
psu set linkGroup replicaAllowed belle-disk-only-linkGroup true
psu set linkGroup nearlineAllowed belle-disk-only-linkGroup false
psu set linkGroup outputAllowed belle-disk-only-linkGroup false
psu set linkGroup onlineAllowed belle-disk-only-linkGroup true
psu addto linkGroup belle-disk-only-linkGroup belle-disk-only-link


#
# Recalls
#
rc onerror suspend
rc set max retries 100
rc set retry 3600
rc set warning path billing
rc set poolpingtimer 600
rc set max restore unlimited
rc set sameHostCopy besteffort
rc set max threads 0


#
# PartitionManager
#
# Allow only one more cached copy than we have stage pools per default.
pm create -type=wass default
pm set default -max-copies=3 -stage-allowed=yes
